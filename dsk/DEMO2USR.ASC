10 REM DEFUSR DEMO SMALL ENOUGH TO _RUN UNDER KUN BASIC
20 DEFINT A-Z
30 REM DEFUSR PREPARE STUFF
40 DIM ZZ(10):DIM JR(2):DIM PT(3)
50 REM RST #30, SLOT ID
60 JR(0)=&HF7:POKE VARPTR(JR(0))+1,PEEK(&HF342)
70 REM ADDRESS
80 JR(1)=&H4014
90 REM EI, RET
100 JR(2)=&HC9FB
110 PB=&H100:SB=&H2000:X1=112:Y1=114:V1=1:V2=1:XL=0:XR=0:YU=0:YD=0:CX=0:CY=0:T=0:A$="":TM=0:MB=0:I=0
120 PT(0)=&H4992:PT(1)=&H9224:PT(2)=&H2449:PT(3)=&H4992
130 REM _MEMCPY(&H4010,VARPTR(MB),2)
140 ZZ(0)=2:ZZ(1)=&H4010:ZZ(2)=VARPTR(MB):ZZ(3)=2:DEFUSR=VARPTR(JR(0)):I=USR(VARPTR(ZZ(0)))

200 COLOR 15,1,1:SCREEN 2,2
210 REM _TILERAM(VARPTR(PT(0)),1,1,SB,32,24,0,0,32,24)
220 ZZ(0)=34:ZZ(1)=VARPTR(PT(0)):ZZ(2)=1:ZZ(3)=1:ZZ(4)=SB:ZZ(5)=32:ZZ(6)=24:ZZ(7)=0:ZZ(8)=0:ZZ(9)=32:ZZ(10)=24:I=USR(VARPTR(ZZ(0)))
230 REM_MEMCPY(SB,PB,6144)
240 ZZ(0)=2:ZZ(1)=SB:ZZ(2)=PB:ZZ(3)=6144:I=USR(VARPTR(ZZ(0)))
250 REM _TILEVRM(VARPTR(PT(0)),1,1,0,0,32,24)
260 ZZ(0)=35:ZZ(1)=VARPTR(PT(0)):ZZ(2)=1:ZZ(3)=1:ZZ(4)=0:ZZ(5)=0:ZZ(6)=32:ZZ(7)=24:I=USR(VARPTR(ZZ(0)))
270 REM _FILVRM(8192,6144,&H4E,0)
280 ZZ(0)=36:ZZ(1)=8192:ZZ(2)=6144:ZZ(3)=&H4E:ZZ(4)=0:I=USR(VARPTR(ZZ(0)))

300 REM _DLOAD ("MSXLOGOH.BIN",7,MB,2048)
310 A$="MSXLOGOH.BIN":ZZ(0)=40:ZZ(1)=VARPTR(A$):ZZ(2)=7:ZZ(3)=MB:ZZ(4)=2048:I=USR(VARPTR(ZZ(0)))
320 IF I<>0 THEN 1500

1000 TIME=0
1010 CX=X1\8:CY=Y1\8
1020 REM _BLIT(X1,Y1,MB,MB+&H400,16,8,PB,32)
1030 ZZ(0)=4:ZZ(1)=X1:ZZ(2)=Y1:ZZ(3)=MB8:ZZ(4)=MB+&H400:ZZ(5)=16:ZZ(6)=8:ZZ(7)=PB:ZZ(8)=32:I=USR(VARPTR(ZZ(0)))
1040 X1=X1+V1:IF X1<1 OR X1>=128 THEN V1=-V1
1050 Y1=Y1+V2:IF Y1<1 OR Y1>=128 THEN V2=-V2
1060 XL=CX-1:IF XL<0 THEN XL=0
1070 YU=CY-1:IF YU<0 THEN YU=0
1080 XR=CX+18:IF XR>32 THEN XR=32
1090 YD=CY+10:IF YD>24 THEN YD=24
1100 T=YU*256+XL*8
1110 REM _BOXMEMVRM(PB+T,(XR-XL)*8,YD-YU,256,BASE(12)+T,256)
1120 ZZ(0)=16:ZZ(1)=PB+T:ZZ(2)=(XR-XL)*8:ZZ(3)=YD-YU:ZZ(4)=256:ZZ(5)=T:ZZ(6)=256:I=USR(VARPTR(ZZ(0)))
1130 REM _BOXMEMCPY(SB+T,(XR-XL)*8,YD-YU,256,PB+T,256)
1140 ZZ(0)=15:ZZ(1)=SB+T:ZZ(2)=(XR-XL)*8:ZZ(3)=YD-YU:ZZ(4)=256:ZZ(5)=PB+T:ZZ(6)=256:I=USR(VARPTR(ZZ(0)))

1200 T=TIME:IF TM<T THEN TM=T
1210 A$=INKEY$:IF A$="" GOTO 1000

1500 SCREEN0:PRINT TM
