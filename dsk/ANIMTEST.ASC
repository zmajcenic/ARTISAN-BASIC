10 REM BASIC SPRITE ANIMATION TESTS
20 DEFINT A-Z:COLOR 15,1,4:KEYOFF
30 A=0:I=0:O=0:SU=0:A$="":X=0:Y=0
40 DIM SA(3,31):DIM AD(3):DIM AS(5):DIM SG(2,2):DIM AR(2):DIM AL(2)
50 _MAXANIMSPRS(0):_MAXANIMDEFS(0):_MAXANIMITEMS(0)
60 _MAXANIMITEMS(24):_MAXANIMDEFS(10):_MAXANIMSPRS(10)

100 REM for 8x8 pat/col change
110 _ANIMITEMPAT(0,4,0,15):_ANIMITEMPAT(1,4,1,14):_ANIMITEMPAT(2,4,2,4):_ANIMITEMPAT(3,4,3,5)
120 REM for 16x16 pat/col chenge
130 _ANIMITEMPAT(4,100,0,15):_ANIMITEMPAT(5,100,1,14):_ANIMITEMPAT(6,100,2,4):_ANIMITEMPAT(7,100,3,5)
140 REM for 8x8 pattern def change
150 _ANIMITEMPTR(8,8,&HB000):_ANIMITEMPTR(9,8,&HB008):_ANIMITEMPTR(10,8,&HB010):_ANIMITEMPTR(11,8,&HB018)
160 REM for 16x16 pattern def change
170 _ANIMITEMPTR(12,8,&HB000):_ANIMITEMPTR(13,8,&HB020):_ANIMITEMPTR(14,8,&HB040):_ANIMITEMPTR(15,8,&HB060)
180 REM for 8x8 pat/col change and manual stepping
190 _ANIMITEMPAT(16,1,0,15):_ANIMITEMPAT(17,1,1,15):_ANIMITEMPAT(18,1,2,15):_ANIMITEMPAT(19,1,3,15)
191 REM for character animation
192 _ANIMITEMPTR(20,3,&HB100):_ANIMITEMPTR(21,3,&HB108):_ANIMITEMPTR(22,3,&HB110):_ANIMITEMPTR(23,3,&HB118)

200 AD(0)=0:AD(1)=1:AD(2)=2:AD(3)=3:_ANIMDEF(0,4,AD)
210 AD(0)=4:AD(1)=5:AD(2)=6:AD(3)=7:_ANIMDEF(1,4,AD)
220 AD(0)=8:AD(1)=9:AD(2)=10:AD(3)=11:_ANIMDEF(2,4,AD)
230 AD(0)=12:AD(1)=13:AD(2)=14:AD(3)=15:_ANIMDEF(3,4,AD)
240 AD(0)=16:AD(1)=17:AD(2)=18:AD(3)=19:_ANIMDEF(4,4,AD)
250 AD(0)=20:AD(1)=21:AD(2)=22:AD(3)=23:_ANIMDEF(5,4,AD)

300 _ANIMSPRITE(0,0,0,1)
310 _ANIMSPRITE(1,1,1,0)
320 _ANIMSPRITE(2,2,2,1)
330 _ANIMSPRITE(3,2,3,1)
340 _ANIMCHAR(4,255,5,1)
350 _ANIMCHAR(5,511,5,1)
360 _ANIMCHAR(6,767,5,1)

500 AS(0)=0:AS(1)=1:AS(3)=4:AS(4)=5:AS(5)=6

600 SCREEN 1,0
610 PRINT "SCREEN 1, 8x8"
620 O=BASE(9):GOSUB 9000
621 _SPRENABLE (SA,SU,0)
622 FOR I=0 TO 31:SA(0,I)=256:SA(1,I)=256:SA(2,I)=I:SA(3,I)=4:NEXT
623 SA(0,0)=50:SA(1,0)=50
624 SA(0,1)=100:SA(1,1)=50
625 SA(0,2)=50:SA(1,2)=100:SA(2,2)=4:SA(3,2)=9
626 VPOKE BASE(5)+255,255:VPOKE BASE(5)+511,255:VPOKE BASE(5)+767,255
630 SU=1:AS(2)=2:_ANIMSTART(6,AS)
640 A$=INKEY$
650 IF A$="" GOTO 640
660 _ANIMSTOP(6,AS):_SPRDISABLE

700 SCREEN 1,2
710 PRINT "SCREEN 1, 16x16"
720 O=BASE(9):GOSUB 8000
721 _SPRENABLE (SA,SU,0)
722 VPOKE BASE(5)+255,255:VPOKE BASE(5)+511,255:VPOKE BASE(5)+767,255
730 SU=1:AS(2)=3:_ANIMSTART(6,AS)
740 A$=INKEY$
750 IF A$="" GOTO 740
760 _ANIMSTOP(6,AS):_SPRDISABLE

800 SCREEN 2,0
805 OPEN "GRP:" FOR OUTPUT AS #1
810 PRESET(0,0):PRINT#1,"SCREEN 2, 8x8":CLOSE #1
820 O=BASE(14):GOSUB 9000
821 _SPRENABLE (SA,SU,0)
830 SU=1:AS(2)=2:_ANIMSTART(6,AS)
840 A$=INKEY$
850 IF A$="" GOTO 840
860 _ANIMSTOP(6,AS):_SPRDISABLE

900 SCREEN 2,2
905 OPEN "GRP:" FOR OUTPUT AS #1
910 PRESET(0,0):PRINT#1,"SCREEN 2, 16x16":CLOSE #1
920 O=BASE(14):GOSUB 8000
921 _SPRENABLE (SA,SU,0)
930 SU=1:AS(2)=3:_ANIMSTART(6,AS)
940 A$=INKEY$
950 IF A$="" GOTO 940
960 _ANIMSTOP(6,AS):_SPRDISABLE

1000 SCREEN 1,0
1010 PRINT "SCREEN 1, 8x8 manual":PRINT "SPACE to end, other key to cycle"
1020 O=BASE(9):GOSUB 9000
1030 _SPRENABLE (SA,SU,0)
1040 SA(0,1)=256:SA(0,2)=256:SA(2,0)=255
1050 SU=1:_ANIMSPRITE(4,0,4,1)
1060 A$=INKEY$
1070 IF A$="" GOTO 1060
1080 IF A$<>" " THEN _ANIMSTEP(4):GOTO 1060
1090 _SPRDISABLE

1500 REM SPRITE GROUP ANIMATION TEST
1510 SCREEN 2,2
1520 OPEN "GRP:" FOR OUTPUT AS #1
1530 PRESET(0,0):PRINT#1,"SCREEN 2, 16x16, move char":CLOSE #1
1540 O=BASE(14):GOSUB 41100
1550 REM DEFINE SPRITE GROUP
1560 SG(0,0)=0:SG(1,0)=0:SG(2,0)=0
1570 SG(0,1)=1:SG(1,1)=0:SG(2,1)=0
1580 SG(0,2)=2:SG(1,2)=0:SG(2,2)=0
1590 REM DEFINE ANIMATIONS
1600 REM RIGHT DIRECTION FIRST
1610 REM BLACK
1620 _ANIMITEMPAT(0,3,0,1):_ANIMITEMPAT(1,3,3,1):_ANIMITEMPAT(2,3,6,1)
1630 REM BLUE
1640 _ANIMITEMPAT(3,3,1,4):_ANIMITEMPAT(4,3,4,4):_ANIMITEMPAT(5,3,7,4)
1650 REM WHITE
1660 _ANIMITEMPAT(6,3,2,15):_ANIMITEMPAT(7,3,5,15):_ANIMITEMPAT(8,3,8,15)
1670 REM LEFT DIRECTION
1680 REM BLACK
1690 _ANIMITEMPAT(9,3,9,1):_ANIMITEMPAT(10,3,12,1):_ANIMITEMPAT(11,3,15,1)
1700 REM BLUE
1710 _ANIMITEMPAT(12,3,10,4):_ANIMITEMPAT(13,3,13,4):_ANIMITEMPAT(14,3,16,4)
1720 REM WHITE
1730 _ANIMITEMPAT(15,3,11,15):_ANIMITEMPAT(16,3,14,15):_ANIMITEMPAT(17,3,17,15)
1731 _ANIMITEMPTR(20,3,&HB100):_ANIMITEMPTR(21,3,&HB108):_ANIMITEMPTR(22,3,&HB110):_ANIMITEMPTR(23,3,&HB118)
1740 REM ANIMATION DEFINITION - RIGHT BLACK
1750 AD(0)=0:AD(1)=1:AD(2)=2:AD(3)=1:_ANIMDEF(0,4,AD)
1760 REM ANIMATION DEFINITION - RIGHT BLUE
1770 AD(0)=3:AD(1)=4:AD(2)=5:AD(3)=4:_ANIMDEF(1,4,AD)
1780 REM ANIMATION DEFINITION - RIGHT WHITE
1790 AD(0)=6:AD(1)=7:AD(2)=8:AD(3)=7:_ANIMDEF(2,4,AD)
1800 REM ANIMATION DEFINITION - LEFT BLACK
1810 AD(0)=9:AD(1)=10:AD(2)=11:AD(3)=10:_ANIMDEF(3,4,AD)
1820 REM ANIMATION DEFINITION - LEFT BLUE
1830 AD(0)=12:AD(1)=13:AD(2)=14:AD(3)=13:_ANIMDEF(4,4,AD)
1840 REM ANIMATION DEFINITION - LEFT WHITE
1850 AD(0)=15:AD(1)=16:AD(2)=17:AD(3)=16:_ANIMDEF(5,4,AD)
1855 AD(0)=20:AD(1)=21:AD(2)=22:AD(3)=23:_ANIMDEF(6,4,AD)
1860 REM SPRITE ANIMATION RIGHT BLACK
1870 _ANIMSPRITE(0,0,0,1)
1880 REM SPRITE ANIMATION RIGHT BLUE
1890 _ANIMSPRITE(1,1,1,1)
1900 REM SPRITE ANIMATION RIGHT WHITE
1910 _ANIMSPRITE(2,2,2,1)
1920 REM SPRITE ANIMATION LEFT BLACK
1930 _ANIMSPRITE(3,0,3,1)
1940 REM SPRITE ANIMATION LEFT BLUE
1950 _ANIMSPRITE(4,1,4,1)
1960 REM SPRITE ANIMATION LEFT WHITE
1970 _ANIMSPRITE(5,2,5,1)
1971 _ANIMCHAR(6,767,6,1)
1975 _FILVRM(BASE(11)+2048,2048,&H1A,0)
1976 _FILVRM(BASE(11)+4096,2048,&H1F,0)
1977 _FILVRM(BASE(10)+512,32,255,0)
1978 _FILVRM(BASE(10)+544,224,0,0)
1980 _SPRENABLE (SA,SU,0)
1990 FOR I=0 TO 31:SA(0,I)=256:SA(1,I)=256:SA(2,I)=I:SA(3,I)=4:NEXT
2000 X=120:Y=112
2010 SA(0,0)=Y:SA(1,0)=X:SA(2,0)=0:SA(3,0)=1
2020 SA(0,1)=Y:SA(1,1)=X:SA(2,1)=1:SA(3,1)=4
2030 SA(0,2)=Y:SA(1,2)=X:SA(2,2)=2:SA(3,2)=15
2040 _SPRGRPMOV(X,Y,3,SG):SU=1
2045 _ANIMSTART(6)
2050 AR(0)=0:AR(1)=1:AR(2)=2
2060 AL(0)=3:AL(1)=4:AL(2)=5
2070 IF STRIG(0)=-1 GOTO 2150
2080 A=STICK(0):IF A=0 GOTO 2070
2090 IF A<>3 GOTO 2120
2100 X=X+1:IF X>240 THEN X=240
2110 _SGAM(X,Y,3,SG,3,AR):GOTO 2070
2120 IF A<>7 GOTO 2070
2130 X=X-1:IF X<0 THEN X=0
2140 _SGAM(X,Y,3,SG,3,AL):GOTO 2070
2150 _ANIMSTOP(6):_SPRDISABLE

7010 SCREEN 0
7020 END

8000 REM LOAD 16x16 SPRITES
8010 RESTORE 10000:FOR I=0 TO 127:READ A:VPOKE O+I,A:POKE &HB000+I,A:NEXT:GOTO 9500

9000 REM LOAD 8x8 SPRITES
9010 RESTORE 20000:FOR I=0 TO 31:READ A:VPOKE O+I,A:POKE &HB000+I,A:NEXT:GOTO 9500

9500 RESTORE 30000:FOR I=0 TO 31:READ A:POKE &HB100+I,A:NEXT:RETURN

10000 REM HIGH_PRIORITY_TARGET_PATTERN_1
10010 DATA &HFF, &HFF, &HC0, &HC0, &HC0, &HC0, &HC0, &HC0
10020 DATA &HC0, &HC0, &HC0, &HC0, &HC0, &HC0, &HFF, &HFF
10030 DATA &HFF, &HFF, &H03, &H03, &H03, &H03, &H03, &H03
10040 DATA &H03, &H03, &H03, &H03, &H03, &H03, &HFF, &HFF
10050 REM HIGH_PRIORITY_TARGET_PATTERN_2
10060 DATA &H00, &H00, &H3F, &H3F, &H30, &H30, &H30, &H30
10070 DATA &H30, &H30, &H30, &H30, &H3F, &H3F, &H00, &H00
10080 DATA &H00, &H00, &HFC, &HFC, &H0C, &H0C, &H0C, &H0C
10090 DATA &H0C, &H0C, &H0C, &H0C, &HFC, &HFC, &H00, &H00
10100 REM HIGH_PRIORITY_TARGET_PATTERN_3
10110 DATA &H00, &H00, &H00, &H00, &H0F, &H0F, &H0C, &H0C
10120 DATA &H0C, &H0C, &H0F, &H0F, &H00, &H00, &H00, &H00
10130 DATA &H00, &H00, &H00, &H00, &HF0, &HF0, &H30, &H30
10140 DATA &H30, &H30, &HF0, &HF0, &H00, &H00, &H00, &H00
10150 REM CIVILIAN_TARGET_PATTERN
10160 DATA &H07, &H1F, &H3F, &H7C, &H7E, &HFF, &HEF, &HE7
10170 DATA &HE3, &HE1, &HE0, &H70, &H78, &H3E, &H1F, &H07
10180 DATA &HE0, &HF8, &HFC, &H1E, &H0E, &H07, &H87, &HC7
10190 DATA &HE7, &HF7, &HFF, &H7E, &H3E, &H7C, &HF8, &HE0

20000 REM MINA_PATTERN_1
20010 DATA &H60, &HD0, &HF0, &HF0, &H60, &H00, &H00, &H00
20020 REM MINA_PATTERN_2
20030 DATA &H60, &HD0, &HE8, &H78, &H30, &H00, &H00, &H00
20040 REM MINA_PATTERN_3
20050 DATA &H70, &HE8, &HF8, &H70, &H00, &H00, &H00, &H00
20060 REM MINA_PATTERN_4
20070 DATA &H30, &H68, &HF8, &HF0, &H60, &H00, &H00, &H00

30000 REM CHARACTER_1
30010 DATA &HFF,&H81,&H81,&H81,&H81,&H81,&H81,&HFF
30020 DATA &H00,&H7E,&H42,&H42,&H42,&H42,&H7E,&H00
30030 DATA &H00,&H00,&H3C,&H24,&H24,&H3C,&H00,&H00
30040 DATA &H00,&H00,&H00,&H18,&H18,&H00,&H00,&H00

40000 ' --- R1
40010 ' color 1
40020 DATA &H07,&H08,&H08,&H04,&H04,&H06,&H08,&H10
40030 DATA &H2C,&H4C,&H34,&H04,&H09,&H16,&H24,&H18
40040 DATA &HC0,&H20,&H20,&H20,&H40,&HFC,&H02,&H3C
40050 DATA &H20,&H20,&H20,&H20,&H90,&H50,&H48,&H30
40060 ' color 4
40070 DATA &H00,&H00,&H00,&H00,&H00,&H00,&H00,&H03
40080 DATA &H01,&H01,&H01,&H00,&H00,&H00,&H00,&H00
40090 DATA &H00,&H00,&H80,&H00,&H00,&H00,&H00,&H80
40100 DATA &H80,&H80,&H80,&H00,&H00,&H00,&H00,&H00
40110 ' color 15
40120 DATA &H00,&H07,&H07,&H03,&H03,&H01,&H07,&H0C
40130 DATA &H12,&H32,&H02,&H03,&H06,&H08,&H18,&H00
40140 DATA &H00,&HC0,&H40,&HC0,&H80,&H00,&HFC,&H40
40150 DATA &H40,&H40,&H40,&HC0,&H60,&H20,&H30,&H00
40160 ' 
40170 ' --- R2
40180 ' color 1
40190 DATA &H07,&H08,&H08,&H04,&H04,&H06,&H08,&H08
40200 DATA &H10,&H10,&H0C,&H04,&H05,&H05,&H09,&H0E
40210 DATA &HC0,&H20,&H20,&H20,&H40,&HE0,&H10,&H08
40220 DATA &H24,&H38,&H20,&H20,&HA0,&HA0,&H90,&HF0
40230 ' color 4
40240 DATA &H00,&H00,&H00,&H00,&H00,&H00,&H00,&H03
40250 DATA &H03,&H03,&H01,&H00,&H00,&H00,&H00,&H00
40260 DATA &H00,&H00,&H80,&H00,&H00,&H00,&H00,&HC0
40270 DATA &H80,&H80,&H80,&H00,&H00,&H00,&H00,&H00
40280 ' color 15
40290 DATA &H00,&H07,&H07,&H03,&H03,&H01,&H07,&H04
40300 DATA &H0C,&H0C,&H02,&H03,&H02,&H02,&H06,&H00
40310 DATA &H00,&HC0,&H40,&HC0,&H80,&H00,&HE0,&H30
40320 DATA &H58,&H40,&H40,&HC0,&H40,&H40,&H60,&H00
40330 ' 
40340 ' --- R3
40350 ' color 1
40360 DATA &H07,&H08,&H08,&H04,&H04,&H06,&H08,&H08
40370 DATA &H08,&H08,&H04,&H04,&H04,&H04,&H09,&H07
40380 DATA &HC0,&H20,&H20,&H20,&H40,&HE0,&H10,&H10
40390 DATA &H10,&H10,&H20,&H20,&H40,&H40,&H20,&HC0
40400 ' color 4
40410 DATA &H00,&H00,&H00,&H00,&H00,&H00,&H00,&H03
40420 DATA &H03,&H03,&H01,&H01,&H01,&H00,&H00,&H00
40430 DATA &H00,&H00,&H80,&H00,&H00,&H00,&H00,&HC0
40440 DATA &HC0,&HC0,&H80,&H00,&H00,&H00,&H00,&H00
40450 ' color 15
40460 DATA &H00,&H07,&H07,&H03,&H03,&H01,&H07,&H04
40470 DATA &H04,&H04,&H02,&H02,&H02,&H03,&H06,&H00
40480 DATA &H00,&HC0,&H40,&HC0,&H80,&H00,&HE0,&H20
40490 DATA &H20,&H20,&H40,&HC0,&H80,&H80,&HC0,&H00
40500 ' 
40510 ' --- L1
40520 ' color 1
40530 DATA &H03,&H04,&H04,&H04,&H02,&H3F,&H40,&H3C
40540 DATA &H04,&H04,&H04,&H04,&H09,&H0A,&H12,&H0C
40550 DATA &HE0,&H10,&H10,&H20,&H20,&H60,&H10,&H08
40560 DATA &H34,&H32,&H2C,&H20,&H90,&H68,&H24,&H18
40570 ' color 4
40580 DATA &H00,&H00,&H01,&H00,&H00,&H00,&H00,&H01
40590 DATA &H01,&H01,&H01,&H00,&H00,&H00,&H00,&H00
40600 DATA &H00,&H00,&H00,&H00,&H00,&H00,&H00,&HC0
40610 DATA &H80,&H80,&H80,&H00,&H00,&H00,&H00,&H00
40620 ' color 15
40630 DATA &H00,&H03,&H02,&H03,&H01,&H00,&H3F,&H02
40640 DATA &H02,&H02,&H02,&H03,&H06,&H04,&H0C,&H00
40650 DATA &H00,&HE0,&HE0,&HC0,&HC0,&H80,&HE0,&H30
40660 DATA &H48,&H4C,&H40,&HC0,&H60,&H10,&H18,&H00
40670 ' 
40680 ' --- L2
40690 ' color 1
40700 DATA &H03,&H04,&H04,&H04,&H02,&H07,&H08,&H10
40710 DATA &H24,&H1C,&H04,&H04,&H05,&H05,&H09,&H0F
40720 DATA &HE0,&H10,&H10,&H20,&H20,&H60,&H10,&H10
40730 DATA &H08,&H08,&H30,&H20,&HA0,&HA0,&H90,&H70
40740 ' color 4
40750 DATA &H00,&H00,&H01,&H00,&H00,&H00,&H00,&H03
40760 DATA &H01,&H01,&H01,&H00,&H00,&H00,&H00,&H00
40770 DATA &H00,&H00,&H00,&H00,&H00,&H00,&H00,&HC0
40780 DATA &HC0,&HC0,&H80,&H00,&H00,&H00,&H00,&H00
40790 ' color 15
40800 DATA &H00,&H03,&H02,&H03,&H01,&H00,&H07,&H0C
40810 DATA &H1A,&H02,&H02,&H03,&H02,&H02,&H06,&H00
40820 DATA &H00,&HE0,&HE0,&HC0,&HC0,&H80,&HE0,&H20
40830 DATA &H30,&H30,&H40,&HC0,&H40,&H40,&H60,&H00
40840 ' 
40850 ' --- L3
40860 ' color 1
40870 DATA &H03,&H04,&H04,&H04,&H02,&H07,&H08,&H08
40880 DATA &H08,&H08,&H04,&H04,&H02,&H02,&H04,&H03
40890 DATA &HE0,&H10,&H10,&H20,&H20,&H60,&H10,&H10
40900 DATA &H10,&H10,&H20,&H20,&H20,&H20,&H90,&HE0
40910 ' color 4
40920 DATA &H00,&H00,&H01,&H00,&H00,&H00,&H00,&H03
40930 DATA &H03,&H03,&H01,&H00,&H00,&H00,&H00,&H00
40940 DATA &H00,&H00,&H00,&H00,&H00,&H00,&H00,&HC0
40950 DATA &HC0,&HC0,&H80,&H80,&H80,&H00,&H00,&H00
40960 ' color 15
40970 DATA &H00,&H03,&H02,&H03,&H01,&H00,&H07,&H04
40980 DATA &H04,&H04,&H02,&H03,&H01,&H01,&H03,&H00
40990 DATA &H00,&HE0,&HE0,&HC0,&HC0,&H80,&HE0,&H20
41000 DATA &H20,&H20,&H40,&H40,&H40,&HC0,&H60,&H00
41010 DATA -1
41100 REM -- LOAD SPRITES
41120 RESTORE 40000
41130 READ A: IF A=-1 THEN RETURN ELSE VPOKE O,A:O=O+1:GOTO 41130
